package dev.virtualpatch.networkinfoleaker;

import androidx.appcompat.app.AppCompatActivity;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity {


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ((TextView)findViewById(R.id.infoLbl)).setText("Waiting for network changes");

        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                StringBuilder sb = new StringBuilder("NETWORK INFO:\n");

                Bundle extras = intent.getExtras();

                for(String key : extras.keySet()) {
                    if (extras.get(key) != null) {
                        sb.append(key +
                                " (" + extras.get(key).getClass().getSimpleName() + "): " +
                                extras.get(key) + "\n");
                    }
                }

                ((TextView)findViewById(R.id.infoLbl)).setText(sb.toString());
            }
        }, new IntentFilter("android.net.wifi.CONFIGURED_NETWORKS_CHANGE"));
    }
}